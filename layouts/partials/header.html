<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="{{ .Site.Params.author | default .Site.Title }}">
    <meta name="description" content="{{ if .Description }}{{ .Description }}{{ else if .Site.Params.description }}{{ .Site.Params.description }}{{ else }}{{ .Site.Title }}{{ end }}">
    
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}" />
    <link rel="stylesheet" href="{{ "css/fonts.css" | relURL }}" />
    
    <!-- Font Awesome for social icons -->
    {{ if or .Site.Params.github .Site.Params.linkedin .Site.Params.email }}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
    {{ end }}
    
    {{ partial "head_custom.html" . }}
  </head>

  <body>
    <nav class="navbar">
      <!-- Mobile hamburger menu -->
      <button class="hamburger" id="hamburger-menu" aria-label="Toggle navigation menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <!-- Navigation menu -->
      <ul class="menu" id="nav-menu">
        {{ range .Site.Menus.main }}
        {{ $itemURL := replaceRE "/$" "" .URL }}
        {{ $pageURL := replaceRE "/$" "" $.RelPermalink }}
        {{ $isCurrent := or (eq $pageURL $itemURL) (and (eq $itemURL "") (eq $pageURL "")) }}
        <li{{ if $isCurrent }} class="active"{{ end }}>
          <a href="{{ .URL | relURL }}"{{ if $isCurrent }} aria-current="page"{{ end }}>{{ .Name }}</a>
        </li>
        {{ end }}
      </ul>
      
      <!-- Social links -->
      {{ if or .Site.Params.github .Site.Params.linkedin .Site.Params.email }}
      <div class="social-links">
        {{ with .Site.Params.github }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
          <i class="fab fa-github"></i>
        </a>
        {{ end }}
        {{ with .Site.Params.linkedin }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
        {{ end }}
        {{ with .Site.Params.email }}
        <a href="{{ . }}" aria-label="Email">
          <i class="fas fa-envelope"></i>
        </a>
        {{ end }}
      </div>
      {{ end }}
    </nav>

    <!-- Mobile navigation script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.getElementById('hamburger-menu');
        const navMenu = document.getElementById('nav-menu');
        
        if (hamburger && navMenu) {
            hamburger.addEventListener('click', function() {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
            
            // Close menu when clicking on a link
            const menuLinks = navMenu.querySelectorAll('a');
            menuLinks.forEach(link => {
                link.addEventListener('click', function() {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                });
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!hamburger.contains(event.target) && !navMenu.contains(event.target)) {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                }
            });
        }
    });
    </script>